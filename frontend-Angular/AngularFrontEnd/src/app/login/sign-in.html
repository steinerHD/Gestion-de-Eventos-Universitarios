<div class="container py-5">
  <div
    class="logo-container mb-4 d-flex justify-content-center align-items-center">
    <img src="assets/images/logo.jpg" alt="Logo" class="logo-img img-fluid">
  </div>
  
  <div class="card p-4 mx-auto">
  <h3 class="mb-3 text-center">Iniciar Sesión</h3>
  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label for="email" class="form-label">Correo institucional</label>
      <input type="email" class="form-control" id="email" formControlName="email" placeholder="Escribe tu correo" required
        [ngClass]="{'is-invalid': loginForm.get('email')?.invalid && (loginForm.get('email')?.dirty || loginForm.get('email')?.touched)}">
      <div *ngIf="loginForm.get('email')?.hasError('required') && (loginForm.get('email')?.dirty || loginForm.get('email')?.touched)"
           class="invalid-feedback d-block">
        El correo es obligatorio.
      </div>
      <div *ngIf="loginForm.get('email')?.hasError('email') && (loginForm.get('email')?.dirty || loginForm.get('email')?.touched)"
           class="invalid-feedback d-block">
        El correo debe ser válido.
      </div>
      <div *ngIf="loginForm.get('email')?.hasError('pattern') && (loginForm.get('email')?.dirty || loginForm.get('email')?.touched)"
           class="invalid-feedback d-block">
        El correo debe pertenecer al dominio institucional <strong>@uao.edu.co</strong>.
      </div>
    </div>
    <div class="mb-3">
      <label for="password" class="form-label">Contraseña</label>
      <input type="password" class="form-control" id="password" formControlName="password" placeholder="Escribe tu contraseña" required
        [ngClass]="{'is-invalid': loginForm.get('password')?.invalid && (loginForm.get('password')?.dirty || loginForm.get('password')?.touched)}">
      <div *ngIf="loginForm.get('password')?.hasError('required') && (loginForm.get('password')?.dirty || loginForm.get('password')?.touched)"
           class="invalid-feedback d-block">
        La contraseña es obligatoria.
      </div>
      <div *ngIf="loginForm.get('password')?.hasError('minlength') && (loginForm.get('password')?.dirty || loginForm.get('password')?.touched)"
           class="invalid-feedback d-block">
        La contraseña debe tener al menos 6 caracteres.
      </div>
    </div>
    <button type="submit" class="btn btn-primary w-100 mb-4" [disabled]="loginForm.invalid">Iniciar Sesión</button>
  </form>
<div class="text-center mt-3">
  <a
    [routerLink]="['/signup']"
    class="btn btn-link p-0"
    role="button"
    style="color: #176a6a; font-weight: 600;">
    ¿Aún no tienes cuenta? Créala aquí
  </a>
</div>
<div class="text-center mt-2">
  <a
    [routerLink]="['/forgetpassword']"
    class="btn btn-link p-0"
    role="button"
    style="color: #176a6a; font-weight: 600;">
    ¿Se te olvidó tu contraseña?
  </a>
</div>
</div>
</div>

<!-- Modal de activación para secretarias inactivas -->
<div class="modal fade" [class.show]="showActivationModal" [style.display]="showActivationModal ? 'block' : 'none'" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cuenta Inactiva</h5>
      </div>
      <div class="modal-body">
        <p>Tu cuenta de secretaría se encuentra inactiva.</p>
        <p>Esto puede ocurrir porque se registró otra secretaria en tu facultad.</p>
        <p><strong>¿Deseas activar tu cuenta?</strong></p>
        <p class="text-muted small">Nota: Al activar tu cuenta, cualquier otra secretaria de tu facultad será desactivada automáticamente.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="cerrarModal()">Cancelar</button>
        <button type="button" class="btn btn-primary" (click)="activarSecretaria()">Activar Mi Cuenta</button>
      </div>
    </div>
  </div>
</div>
<div class="modal-backdrop fade" [class.show]="showActivationModal" *ngIf="showActivationModal"></div>