<header class="headerSec">
  <img src="assets/images/logo.jpg" alt="Logo" class="logo-img" routerLink="/home">
  <h1>Eventos a evaluar</h1>
  <div class="header-actions">
    <i class="ri-account-circle-fill" id="perfilBtn" routerLink="/profile-menu"></i>
  </div>
</header>

<div class="container my-events-container">

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-message">
    <p>Cargando eventos...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-message">
    <p>{{ error }}</p>
    <button class="btn btn-primary" (click)="loadEvents()">Reintentar</button>
  </div>

  <!-- No Events State -->
  <div *ngIf="!loading && !error && events.length === 0" class="no-events-message">
    <p>No hay eventos a evaluar</p>
  </div>

  <!-- Events Content -->
  <div *ngIf="!loading && !error && events.length > 0">


    <!-- Eventos Pendientes -->
    <div *ngIf="pendingEvents.length > 0">
      <h2>Eventos Pendientes de Validaci√≥n</h2>
      <div *ngFor="let event of pendingEvents" [class]="getEstadoCardClass(event.estado)">
        <div [class]="getEstadoBadgeClass(event.estado)">{{ event.estado }}</div>
        <h3>{{ event.titulo }}</h3>
        <p><strong>Tipo:</strong> {{ event.tipoEvento }}</p>
        <p><strong>Fecha:</strong> {{ event.fecha }}</p>
        <p><strong>Hora inicio:</strong> {{ event.horaInicio }}</p>
        <p><strong>Hora fin:</strong> {{ event.horaFin }}</p>

        <div class="event-actions">
          <button id='editarBtn' *ngIf="canEdit(event)" class="btn btn-secondary btn-sm" (click)="editEvent(event)">
            Editar Evento
          </button>
          <button class="btn btn-success btn-sm" (click)="approveEvent(event)">Aprobar</button>
          <button class="btn btn-warning btn-sm" (click)="rejectEvent(event)">Rechazar</button>
          <button class="btn btn-info btn-sm" [routerLink]="['/eventos/detalle', event.idEvento]" aria-label="Ver detalles">Ver</button>
        </div>
      </div>
    </div>


    <!-- Eventos Rechazados -->
    <div *ngIf="rejectedEvents.length > 0">
      <h2>Eventos Rechazados</h2>
      <div *ngFor="let event of rejectedEvents" [class]="getEstadoCardClass(event.estado)">
        <div [class]="getEstadoBadgeClass(event.estado)">{{ event.estado }}</div>
        <h3>{{ event.titulo }}</h3>
        <p><strong>Tipo:</strong> {{ event.tipoEvento }}</p>
        <p><strong>Fecha:</strong> {{ event.fecha }}</p>
        <p><strong>Hora inicio:</strong> {{ event.horaInicio }}</p>
        <p><strong>Hora fin:</strong> {{ event.horaFin }}</p>

        <div class="event-actions">
        </div>
      </div>
    </div>

    <!-- Eventos Aprobados -->
    <div *ngIf="approvedEvents.length > 0">
      <h2>Eventos Aprobados</h2>
      <div *ngFor="let event of approvedEvents" [class]="getEstadoCardClass(event.estado)">
        <div [class]="getEstadoBadgeClass(event.estado)">{{ event.estado }}</div>
        <h3>{{ event.titulo }}</h3>
        <p><strong>Tipo:</strong> {{ event.tipoEvento }}</p>
        <p><strong>Fecha:</strong> {{ event.fecha }}</p>
        <p><strong>Hora inicio:</strong> {{ event.horaInicio }}</p>
        <p><strong>Hora fin:</strong> {{ event.horaFin }}</p>
      </div>
    </div>

  </div>
</div>

<!-- Detached details view now lives in the 'detalle-aprob-event' route -->