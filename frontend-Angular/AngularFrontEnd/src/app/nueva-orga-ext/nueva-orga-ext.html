<div class="modal fade" [class.show]="showModal" [style.display]="showModal ? 'block' : 'none'" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Registrar Nueva Organización</h5>
        <button type="button" class="btn-close" (click)="cancel()" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="organizationForm" (ngSubmit)="onSubmit()">
          <div class="row">
            <!-- Columna Izquierda -->
            <div class="col-md-6">
              <div class="mb-3">
                <label for="nombre" class="form-label">Nombre de la organización</label>
                <input 
                  type="text" 
                  id="nombre" 
                  class="form-control"
                  formControlName="nombre" 
                  placeholder="Nombre de la empresa"
                  [ngClass]="{'is-invalid': organizationForm.get('nombre')?.invalid && organizationForm.get('nombre')?.touched}"
                >
                <div *ngIf="organizationForm.get('nombre')?.hasError('required') && organizationForm.get('nombre')?.touched"
                    class="invalid-feedback">
                  El nombre es obligatorio.
                </div>
                <div *ngIf="organizationForm.get('nombre')?.hasError('dangerousContent') && organizationForm.get('nombre')?.touched"
                    class="invalid-feedback">
                  {{ organizationForm.get('nombre')?.errors?.['dangerousContent']?.message || 'El nombre contiene caracteres no permitidos.' }}
                </div>
              </div>

              <div class="mb-3">
                <label for="nit" class="form-label">NIT</label>
                <input 
                  type="text" 
                  id="nit" 
                  class="form-control"
                  formControlName="nit" 
                  placeholder="Ej: 900.123.456-7"
                  [ngClass]="{'is-invalid': organizationForm.get('nit')?.invalid && organizationForm.get('nit')?.touched}"
                >
                <div *ngIf="organizationForm.get('nit')?.hasError('required') && organizationForm.get('nit')?.touched"
                    class="invalid-feedback">
                  El NIT es obligatorio.
                </div>
                <div *ngIf="organizationForm.get('nit')?.hasError('dangerousContent') && organizationForm.get('nit')?.touched"
                    class="invalid-feedback">
                  {{ organizationForm.get('nit')?.errors?.['dangerousContent']?.message || 'El NIT contiene caracteres no permitidos.' }}
                </div>
              </div>

              <div class="mb-3">
                <label for="telefono" class="form-label">Teléfono de Contacto</label>
                <input 
                  type="tel" 
                  id="telefono" 
                  class="form-control"
                  formControlName="telefono" 
                  placeholder="Número de teléfono"
                  [ngClass]="{'is-invalid': organizationForm.get('telefono')?.invalid && organizationForm.get('telefono')?.touched}"
                >
                <div *ngIf="organizationForm.get('telefono')?.hasError('required') && organizationForm.get('telefono')?.touched"
                    class="invalid-feedback">
                  El teléfono es obligatorio.
                </div>
                <div *ngIf="organizationForm.get('telefono')?.hasError('dangerousContent') && organizationForm.get('telefono')?.touched"
                    class="invalid-feedback">
                  {{ organizationForm.get('telefono')?.errors?.['dangerousContent']?.message || 'El teléfono contiene caracteres no permitidos.' }}
                </div>
              </div>

              <div class="mb-3">
                <label for="direccion" class="form-label">Dirección</label>
                <input 
                  type="text" 
                  id="direccion" 
                  class="form-control"
                  formControlName="direccion" 
                  placeholder="Dirección de la sede principal"
                  [ngClass]="{'is-invalid': organizationForm.get('direccion')?.invalid && organizationForm.get('direccion')?.touched}"
                >
                <div *ngIf="organizationForm.get('direccion')?.hasError('required') && organizationForm.get('direccion')?.touched"
                    class="invalid-feedback">
                  La dirección es obligatoria.
                </div>
                <div *ngIf="organizationForm.get('direccion')?.hasError('dangerousContent') && organizationForm.get('direccion')?.touched"
                    class="invalid-feedback">
                  {{ organizationForm.get('direccion')?.errors?.['dangerousContent']?.message || 'La dirección contiene caracteres no permitidos.' }}
                </div>
              </div>
            </div>

            <!-- Columna Derecha -->
            <div class="col-md-6">
              <div class="mb-3">
                <label for="representanteLegal" class="form-label">Representante Legal</label>
                <input 
                  type="text" 
                  id="representanteLegal" 
                  class="form-control"
                  formControlName="representanteLegal" 
                  placeholder="Nombre del representante"
                  [ngClass]="{'is-invalid': organizationForm.get('representanteLegal')?.invalid && organizationForm.get('representanteLegal')?.touched}"
                >
                <div *ngIf="organizationForm.get('representanteLegal')?.hasError('required') && organizationForm.get('representanteLegal')?.touched"
                    class="invalid-feedback">
                  El representante legal es obligatorio.
                </div>
                <div *ngIf="organizationForm.get('representanteLegal')?.hasError('dangerousContent') && organizationForm.get('representanteLegal')?.touched"
                    class="invalid-feedback">
                  {{ organizationForm.get('representanteLegal')?.errors?.['dangerousContent']?.message || 'El representante legal contiene caracteres no permitidos.' }}
                </div>
              </div>

              <div class="mb-3">
                <label for="sectorEconomico" class="form-label">Sector económico</label>
                <select 
                  id="sectorEconomico" 
                  class="form-select"
                  formControlName="sectorEconomico" 
                  [ngClass]="{'is-invalid': organizationForm.get('sectorEconomico')?.invalid && organizationForm.get('sectorEconomico')?.touched}"
                >
                  <option value="" disabled>Seleccione un sector económico</option>
                  <option value="Primario">Primario</option>
                  <option value="Secundario">Secundario</option>
                  <option value="Terciario">Terciario</option>
                  <option value="Cuaternario">Cuaternario</option>
                  <option value="Quinario">Quinario</option>
                </select>
                <div *ngIf="organizationForm.get('sectorEconomico')?.hasError('required') && organizationForm.get('sectorEconomico')?.touched"
                    class="invalid-feedback">
                  El sector económico es obligatorio.
                </div>
                <div *ngIf="organizationForm.get('sectorEconomico')?.hasError('dangerousContent') && organizationForm.get('sectorEconomico')?.touched"
                    class="invalid-feedback">
                  {{ organizationForm.get('sectorEconomico')?.errors?.['dangerousContent']?.message || 'El sector económico contiene caracteres no permitidos.' }}
                </div>
              </div>

              <div class="mb-3">
                <label for="actividadPrincipal" class="form-label">Actividad principal</label>
                <textarea 
                  id="actividadPrincipal" 
                  class="form-control"
                  rows="4"
                  formControlName="actividadPrincipal" 
                  placeholder="Describe la actividad principal de la organización..."
                  [ngClass]="{'is-invalid': organizationForm.get('actividadPrincipal')?.invalid && organizationForm.get('actividadPrincipal')?.touched}"
                ></textarea>
                <div *ngIf="organizationForm.get('actividadPrincipal')?.hasError('required') && organizationForm.get('actividadPrincipal')?.touched"
                    class="invalid-feedback">
                  La actividad principal es obligatoria.
                </div>
                <div *ngIf="organizationForm.get('actividadPrincipal')?.hasError('dangerousContent') && organizationForm.get('actividadPrincipal')?.touched"
                    class="invalid-feedback">
                  {{ organizationForm.get('actividadPrincipal')?.errors?.['dangerousContent']?.message || 'La actividad principal contiene caracteres no permitidos.' }}
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="cancel()">Cancelar</button>
        <button type="button" class="btn btn-primary" (click)="onSubmit()" [disabled]="organizationForm.invalid">Registrar</button>
      </div>
    </div>
  </div>
</div>
<div class="modal-backdrop fade" [class.show]="showModal" *ngIf="showModal"></div>
